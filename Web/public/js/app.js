// Generated by CoffeeScript 1.8.0
(function() {
  var AppConfig, ProjectListController, app;

  app = angular.module("Roughs", ["ngDialog"]);

  AppConfig = (function() {
    function AppConfig($compileProvider, ngDialogProvider) {
      $compileProvider.debugInfoEnabled(false);
      ngDialogProvider.setDefaults({
        showClose: false,
        className: 'ngdialog-theme-default ngdialog-theme-roughs'
      });
    }

    return AppConfig;

  })();

  ProjectListController = (function() {
    function ProjectListController($scope, $http, ngDialog) {
      this.$scope = $scope;
      this.$http = $http;
      this.ngDialog = ngDialog;
      this._setUpScope();
      this._getAllProjects();
    }

    ProjectListController.prototype._setUpScope = function() {
      var $http, $scope, ngDialog;
      $scope = this.$scope;
      $http = this.$http;
      ngDialog = this.ngDialog;
      $scope.confirmDelete = function(index) {
        var dialog, targetProject;
        targetProject = $scope.projects[index];
        dialog = ngDialog.open({
          data: {
            title: "Delete Project",
            message: "Are you sure you want to delete “" + targetProject["title"] + "” from the list?",
            okButtonTitle: "Delete"
          },
          template: "/template/AlertDialog.tmpl.html"
        });
        return dialog.closePromise.then(function(data) {
          if (!data.value || data.value === "$document") {
            return;
          }
          return $http["delete"]("/api/1/projects/" + targetProject["id"]).success(function(data, status, headers, config) {
            return $scope.projects.splice(index, 1);
          });
        });
      };
      return $scope.newProject = function() {
        var dialog;
        dialog = ngDialog.open({
          data: {
            title: "New Project",
            placeholder: "Flinto Project URL",
            okButtonTitle: "Register"
          },
          template: "/template/InputDialog.tmpl.html"
        });
        return dialog.closePromise.then(function(data) {
          if (!data.value || data.value === "$document") {
            return;
          }
          return $http.post("/api/1/projects", {
            "project_url": data.value
          }).success(function(data, status, headers, config) {
            return $scope.projects.splice(0, 0, data);
          });
        });
      };
    };

    ProjectListController.prototype._getAllProjects = function() {
      return this.$http.get("/api/1/projects/all").success((function(_this) {
        return function(data, status, headers, config) {
          return _this.$scope.projects = data;
        };
      })(this));
    };

    return ProjectListController;

  })();

  app.config(["$compileProvider", "ngDialogProvider", AppConfig]);

  app.controller("ProjectListController", ["$scope", "$http", "ngDialog", ProjectListController]);

}).call(this);

//# sourceMappingURL=app.js.map
